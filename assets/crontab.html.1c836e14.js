import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o as a,c as i,e as n}from"./app.29a9c448.js";const r={},d=n(`<h1 id="cron" tabindex="-1"><a class="header-anchor" href="#cron" aria-hidden="true">#</a> Cron</h1><h2 id="_1-\u547D\u4EE4\u7684\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_1-\u547D\u4EE4\u7684\u4F7F\u7528" aria-hidden="true">#</a> 1. \u547D\u4EE4\u7684\u4F7F\u7528</h2><ol><li>\u5217\u51FA\u5F53\u524D\u4EFB\u52A1</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>crontab -l 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>\u5907\u4EFD\u5F53\u524D\u4EFB\u52A1\u5217\u8868</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>crontab -l &gt; my_cron   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>\u7F16\u8F91\u4E00\u4E2A\u547D\u4EE4\u6587\u4EF6</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nano my_crontab
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li>\u5C06\u7F16\u8F91\u597D\u7684\u547D\u4EE4\u751F\u6548</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>crontab my_crontab 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>\u91CD\u542Fcrond</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>service crond restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u76F4\u63A5\u7F16\u8F91" tabindex="-1"><a class="header-anchor" href="#\u76F4\u63A5\u7F16\u8F91" aria-hidden="true">#</a> \u76F4\u63A5\u7F16\u8F91</h3><p>\u4E0D\u5EFA\u8BAE\u8FD9\u4E48\u505A\uFF0C\u901A\u5E38\u662F\u7F16\u8F91\u6587\u4EF6\u7136\u540E\u751F\u6548\uFF0C\u8FD9\u6837\u786E\u4FDD\u6709\u5907\u4EFD</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>crontab -e  # \u4EFB\u4F55\u7528\u6237\u90FD\u53EF\u4EE5\u7528
vim /etc/crontab  # \u4EC5\u9650root\u7528\u6237, \u901A\u5E38\u7528\u4E8E\u7ED9\u5176\u4ED6\u7528\u6237\u6307\u5B9A\u5B9A\u65F6\u4EFB\u52A1, \u6216\u8005\u9700\u8981root\u6765\u8FD0\u884C\u4EFB\u52A1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-\u547D\u4EE4\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2-\u547D\u4EE4\u683C\u5F0F" aria-hidden="true">#</a> 2. \u547D\u4EE4\u683C\u5F0F</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u6587\u4EF6\u683C\u5F0F\u8BF4\u660E
#  \u2014\u2014\u5206\u949F\uFF080 - 59\uFF09
# |  \u2014\u2014\u5C0F\u65F6\uFF080 - 23\uFF09
# | |  \u2014\u2014\u65E5\uFF081 - 31\uFF09
# | | |  \u2014\u2014\u6708\uFF081 - 12\uFF09
# | | | |  \u2014\u2014\u661F\u671F\uFF080 - 7\uFF0C\u661F\u671F\u65E5=0\u62167\uFF09
# | | | | |
# * * * * * \u88AB\u6267\u884C\u7684\u547D\u4EE4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u547D\u4EE4\u7528\u7A7A\u683C\u5206\u9694\uFF0C</li><li>\u4E0D\u7528\u7684, \u4EFB\u610F\u53EF\u80FD\u7684\u4F7F\u7528*\u4EE3\u66FF</li><li>\u591A\u4E2A\u503C\u7528&#39;,&#39;\u5206\u5272</li><li><code>*/2</code> \u6BCF\u4E24\u5206\u949F\uFF0C\u6BCF\u4E24\u5929\u3002\u3002\u3002<code>(0-23)/2</code>11\u70B9\u524D\u6BCF\u4E24\u5C0F\u65F6\u4E00\u6B21</li></ul><h2 id="_3-\u4E0D\u53D1\u9001\u7535\u5B50\u90AE\u4EF6" tabindex="-1"><a class="header-anchor" href="#_3-\u4E0D\u53D1\u9001\u7535\u5B50\u90AE\u4EF6" aria-hidden="true">#</a> 3. \u4E0D\u53D1\u9001\u7535\u5B50\u90AE\u4EF6</h2><p>\u5982\u679C\u8F93\u51FA\u7ED3\u679C\u6765\u81EAcrontab, \u90A3\u4E48cron\u5B88\u62A4\u8FDB\u7A0B\u4F1A\u4F7F\u7528\u7535\u5B50\u90AE\u4EF6\u53D1\u9001\u7ED9\u7528\u6237, \u4F4D\u7F6E<code>/var/spool/mail/ec2-user</code>, \u9700\u8981\u5C06\u547D\u4EE4\u91CD\u5B9A\u5411\u5230 <code>&gt;/dev/null 2&gt;&amp;1</code></p><h2 id="_4-\u67E5\u770B\u65E5\u5FD7\u6392\u9664\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_4-\u67E5\u770B\u65E5\u5FD7\u6392\u9664\u95EE\u9898" aria-hidden="true">#</a> 4. \u67E5\u770B\u65E5\u5FD7\u6392\u9664\u95EE\u9898</h2><p>\u4F4D\u7F6E: <code>/var/log/cron</code></p><h2 id="_5-crontab\u8BBE\u7F6Escrapy\u811A\u672C\u7684\u5B9A\u65F6\u4EFB\u52A1" tabindex="-1"><a class="header-anchor" href="#_5-crontab\u8BBE\u7F6Escrapy\u811A\u672C\u7684\u5B9A\u65F6\u4EFB\u52A1" aria-hidden="true">#</a> 5. crontab\u8BBE\u7F6Escrapy\u811A\u672C\u7684\u5B9A\u65F6\u4EFB\u52A1</h2><p>\u7F16\u5199shell\u811A\u672C</p><pre><code>\`\`\`
#!/bin/sh
. ~/.bash_profile
source /etc/profile
# \u5207\u6362\u5230scrpay\u547D\u4EE4\u4E0B
cd /home/ec2-user/crawler/mangoplate_scrapy/

# \u4F9D\u6B21\u542F\u52A8\u722C\u866B
/usr/local/bin/scrapy list
/usr/local/bin/scrapy crawl codetable
/usr/local/bin/scrapy crawl mangoplate

# \u53BB\u91CD
/usr/bin/python3 deduplicate.py
\`\`\`
</code></pre><h2 id="_6-\u73AF\u5883\u53D8\u91CF\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#_6-\u73AF\u5883\u53D8\u91CF\u7684\u95EE\u9898" aria-hidden="true">#</a> 6. \u73AF\u5883\u53D8\u91CF\u7684\u95EE\u9898</h2><ol><li>\u7531\u4E8Ecrontab\u53EA\u52A0\u8F7D/ect/environment\uFF0C\u5E76\u4E0D\u52A0\u8F7D/etc/profile\u548C~/.bash_profile\uFF0C\u6240\u4EE5\u9700\u8981\u5728\u811A\u672C\u91CC\u624B\u52A8\u6DFB\u52A0\u73AF\u5883\u53D8\u91CF<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    . /etc/profile
    . ~/.bash_profile
    export xx/xx/xx.conf  # \u53EF\u4EE5\u5BFC\u5165\u9700\u8981\u7684\u914D\u7F6E\u6587\u4EF6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u8003\u8651\u5230crontab\u4E2D\u8BBE\u7F6E\u590D\u6742\u4E0D\u4E00, \u5E94\u8BE5\u89C4\u8303shell\u547D\u4EE4\u7684\u683C\u5F0F, \u786E\u4FDD\u6BCF\u6B21\u4F7F\u7528\u7EDD\u5BF9\u8DEF\u5F84, \u9002\u7528\u4E8Ecrontab\u7684\u8FD0\u884C</li><li>crontab\u7684\u4EFB\u52A1\u53EA\u6709\u4E00\u884C\u8FD0\u884Cshell\u811A\u672C\u7684\u547D\u4EE4\u5373\u53EF</li></ul></li><li>\u5982\u679C\u4E0D\u9002\u7528shell\u811A\u672C\uFF0C\u4E5F\u53EF\u4EE5\u8FD9\u6837\uFF1A<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> 0 10 * * 5 source ~/.bashrc;cd /home/xiaoteng/code/aspex_tickets/src &amp;&amp; python3 all_tickets.py &gt;/dev/null 2&gt;&amp;1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="_7-docker\u4E2D" tabindex="-1"><a class="header-anchor" href="#_7-docker\u4E2D" aria-hidden="true">#</a> 7. docker\u4E2D</h2><p>\u7531\u4E8Edocker\u9ED8\u8BA4\u4E0D\u542F\u52A8\uFF0C\u542F\u52A8\u5BB9\u5668\u540E\u6267\u884C\u5982\u4E0B:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># \u540E\u53F0\u542F\u52A8cron
/usr/sbin/crond -i
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,30),l=[d];function s(c,t){return a(),i("div",null,l)}var v=e(r,[["render",s],["__file","crontab.html.vue"]]);export{v as default};
