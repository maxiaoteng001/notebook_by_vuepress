import{_ as i}from"./plugin-vue_export-helper.21dcd24c.js";import{r as o,o as c,c as t,a as s,b as l,e,d as n}from"./app.29a9c448.js";const r={},d=e('<h1 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h1><p>[TOC]</p><h2 id="_1-\u57FA\u672C\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#_1-\u57FA\u672C\u6982\u5FF5" aria-hidden="true">#</a> 1. \u57FA\u672C\u6982\u5FF5</h2><ul><li><p>LXC(Linux Containers) \u64CD\u4F5C\u7CFB\u7EDF\u5C42\u9762\u5316\u7684\u865A\u62DF\u6280\u672F, \u53EA\u8FD0\u884C1\u4E2A\u5185\u6838, \u4E00\u4E2A\u865A\u62DF\u5316\u7684\u53EF\u6267\u884C\u5185\u6838\u5C31\u662F\u4E00\u4E2A\u5BB9\u5668,\u53EF\u4EE5\u7ED1\u5B9ACPU\u548C\u5185\u5B58\u7684\u4F7F\u7528, \u5206\u914D\u7279\u5B9A\u6BD4\u4F8B\u7684CPU\u7684\u65F6\u95F4, IO\u65F6\u95F4, \u5BB9\u5668\u6280\u672F\u7684\u672C\u8D28\u662F\u5BF9\u5BF9\u8BA1\u7B97\u673A\u7CFB\u7EDF\u8D44\u6E90\u7684\u9694\u79BB\u548C\u63A7\u5236</p></li><li><p>Docker \u662F\u4E00\u4E2A\u865A\u62DF\u73AF\u5883\u7684\u5BB9\u5668.</p></li><li><p>Docker\u7279\u70B9\u548C\u5E94\u7528\u573A\u666F \u4E2A\u4EBA\u5F00\u53D1\u673A\u548C\u670D\u52A1\u5668\u4E0D\u662F\u540C\u4E00\u4E2A\u64CD\u4F5C\u73AF\u5883 \u5E94\u7528\u7A0B\u5E8F\u9700\u8981\u4E0D\u540C\u7684\u5E94\u7528\u73AF\u5883 \u8017\u8D39\u8D44\u6E90\u5F88\u5C0F</p></li></ul><p><strong>\u865A\u62DF\u673Aor\u7528\u5BB9\u5668\u6280\u672F</strong></p><ol><li>\u4E00\u4E2A\u5E94\u7528\u901A\u5E38\u9700\u8981\u542F\u52A8\u5F88\u591A\u670D\u52A1, \u6BCF\u4E2A\u670D\u52A1\u5668\u9700\u8981\u4E00\u4E2A\u5BB9\u5668, \u5F00\u53D1\u9EBB\u70E6</li><li>Docker\u684C\u9762\u73AF\u5883\u652F\u6301\u5C11</li></ol><blockquote><p>\u6240\u4EE5\u5F00\u53D1\u4F7F\u7528vagrant\u865A\u62DF\u673A, \u90E8\u7F72\u4F7F\u7528docker</p></blockquote><hr><h2 id="_2-\u5B89\u88C5\u548C\u5F00\u59CB" tabindex="-1"><a class="header-anchor" href="#_2-\u5B89\u88C5\u548C\u5F00\u59CB" aria-hidden="true">#</a> 2. \u5B89\u88C5\u548C\u5F00\u59CB</h2><h3 id="_1-windows" tabindex="-1"><a class="header-anchor" href="#_1-windows" aria-hidden="true">#</a> 1. windows</h3><ol><li><p>\u5B89\u88C5\u8F6F\u4EF6 \u5B98\u7F51\u5B89\u88C5, \u76EE\u5F55: <code>C:\\Program Files\\Docker</code></p></li><li><p>\u6587\u4EF6\u76EE\u5F55<br> docker pull\u4E0B\u8F7D\u540E\u7684\u6587\u4EF6\u4F4D\u7F6E: <code>C:\\Users\\Public\\Documents\\Hyper-V\\Virtual Hard Disks</code></p><blockquote><p><strong>\u8BF4\u660E:</strong> windows\u4E0A\u7684docker\u672C\u8D28\u4E0A\u8FD8\u662F\u501F\u52A9\u4E0Ewindows\u5E73\u53F0\u7684hyper-v\u521B\u5EFA\u4E00\u4E2Alinux\u865A\u62DF\u673A\uFF0C\u4F60\u6267\u884C\u7684\u6240\u6709\u547D\u4EE4\u90FD\u662F\u5728\u8FD9\u4E2A\u865A\u62DF\u673A\u91CC\u6267\u884C\u7684\uFF0C\u6240\u6709pull\u5230\u672C\u5730\u7684image\u90FD\u4F1A\u5728\u865A\u62DF\u673A\u7684Virtual hard disks\u76EE\u5F55\u7684\u6587\u4EF6\u4E2D\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u5C31\u662F\u865A\u62DF\u786C\u76D8\u6587\u4EF6\uFF08\u6709\u70B9\u7C7B\u4F3C\u4E0Evmware\u7684\u539F\u7406\uFF09\u3002 \u56E0\u6B64\u4F60\u6253\u5F00hyper-v\u7BA1\u7406\u5668\uFF0C\u53EF\u4EE5\u627E\u5230docker\u521B\u5EFA\u7684\u865A\u62DF\u673A\uFF0C\u70B9\u51FB\u5DE6\u4FA7\u7684\u865A\u62DF\u673A\u540D\u79F0\uFF0C\u7136\u540E\u518D\u70B9\u51FB\u53F3\u8FB9\u7684\u79FB\u52A8\u9009\u9879\uFF0C\u6309\u7167\u5411\u5BFC\u5C06\u865A\u62DF\u673A\u79FB\u52A8\u5230\u5176\u4ED6\u76EE\u5F55\u5373\u53EF\u3002 \u53E6\u5916\u8FD8\u53EF\u4EE5\u5728\u83DC\u5355\u680F\u70B9\u51FB:\u64CD\u4F5C-&gt;Hyper-v\u8BBE\u7F6E\uFF0C\u6765\u8C03\u6574\u4F60\u6240\u6709\u865A\u62DF\u673A\u7684\u865A\u62DF\u786C\u76D8\u6587\u4EF6\u7684\u9ED8\u8BA4\u5B58\u50A8\u4F4D\u7F6E</p></blockquote></li><li><p>\u8BF4\u660E windows10\u5B89\u88C5\u4E86docker,\u8981\u6C42\u542F\u7528hyper-v\u6765\u8FD0\u884C\u8FD0\u884Cdocker\u7684\u865A\u62DF\u673AMobyLinuxVM, \u6240\u4EE5\u9700\u8981\u91CD\u542F \u542F\u7528\u5173\u95EDHyper-V\u7684\u65B9\u6CD5:</p><ul><li>\u7BA1\u7406\u5458\u8EAB\u4EFD\u6253\u5F00PowerShell</li><li>bcdedit # \u67E5\u770BHyper-V\u662F\u5426\u542F\u7528</li><li>bcdedit /set hypervisorlaunchtype auto # \u8BBE\u7F6E\u4E3A\u542F\u52A8</li></ul></li></ol><h3 id="_2-linux-centos" tabindex="-1"><a class="header-anchor" href="#_2-linux-centos" aria-hidden="true">#</a> 2. linux(centos)</h3>',12),p=e(`<li><p>\u4F7F\u7528\u4ED3\u5E93\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>sudo yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2
<span class="token function">sudo</span> yum-config-manager --add-repo <span class="token operator">&lt;</span>https://download.docker.com/linux/centos/docker-ce.repo<span class="token operator">&gt;</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4F7F\u7528\u811A\u672C\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>curl -fsSL <span class="token operator">&lt;</span>https://get.docker.com<span class="token operator">&gt;</span> -o get-docker.sh
<span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u67E5\u770B\u542F\u52A8</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>sudo systemctl start <span class="token function">docker</span>  <span class="token comment"># \u542F\u52A8docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,3),u=n("RHEL \u5B89\u88C5 \u8E29\u5751\u53C2\u8003("),m={href:"https://stackoverflow.com/questions/45415524/installing-docker-ce-in-redhat/47903707#47903707",target:"_blank",rel:"noopener noreferrer"},v=n("https://stackoverflow.com/questions/45415524/installing-docker-ce-in-redhat/47903707#47903707"),k=n(")"),b=e(`<ul><li>\u5B89\u88C5</li></ul><blockquote><p>sudo yum install -y docker</p></blockquote><ul><li>\u9519\u8BEF (\u62A5\u9519: <code>No package docker available.</code> \u6216 <code>Package: docker-ce-17.06.0.ce-1.el7.centos.x86_64 (docker-ce-stable) Requires: container-selinux &gt;= 2.9</code>) <ul><li><p>\u5BF9\u4E8ERHEL 7.x\u4EE5\u4E0A\u7684\u7CFB\u7EDF, docker\u5728 <code>rhel-7-server-extras-rpms</code>\u4ED3\u5E93\u4E2D, \u53EF\u4EE5\u4F7F\u7528\u5982\u4E0B\u547D\u4EE4\u751F\u6548: <code>subscription-manager repos --enable=rhel-7-server-extras-rpms</code></p></li><li><p>\u5982\u679C\u7CFB\u7EDF(\u5982: aws\u4E0A\u7684RHEL)\u6CA1\u6709\u4EFB\u4F55subscription, \u53EF\u4EE5\u4F7F\u7528centos\u7684\u6269\u5145yum\u6E90, \u65B9\u6CD5\u5982\u4E0B:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/yum.repos.d/centos.repo

<span class="token punctuation">[</span>CentOS-extras<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-7-Extras
<span class="token assign-left variable">mirrorlist</span><span class="token operator">=</span>http://mirrorlist.centos.org/?release<span class="token operator">=</span><span class="token number">7</span><span class="token operator">&amp;</span><span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token variable">$basearch</span><span class="token operator">&amp;</span><span class="token assign-left variable">repo</span><span class="token operator">=</span>extras<span class="token operator">&amp;</span><span class="token assign-left variable">infra</span><span class="token operator">=</span><span class="token variable">$infra</span>
<span class="token comment">#baseurl=http://mirror.centos.org/centos/$releasever/extras/$basearch/</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul>`,3),h=s("h3",{id:"_3-macos",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-macos","aria-hidden":"true"},"#"),n(" 3. macos")],-1),g=n("\u53C2\u8003\u83DC\u9E1F\u6559\u7A0B"),f={href:"https://www.runoob.com/docker/macos-docker-install.html",target:"_blank",rel:"noopener noreferrer"},_=n("https://www.runoob.com/docker/macos-docker-install.html"),x=e(`<ol><li><p>homebrew\u5B89\u88C5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>brew cask <span class="token function">install</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="_3-docker\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#_3-docker\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> 3. Docker\u5E38\u7528\u547D\u4EE4</h2>`,2),y=n("\u53C2\u8003"),w={href:"https://segmentfault.com/a/1190000008876540#articleHeader21",target:"_blank",rel:"noopener noreferrer"},q=n("docker\u547D\u4EE4\u8BE6\u89E3"),D=s("br",null,null,-1),P={href:"https://jiajially.gitbooks.io/dockerguide/content/index.html",target:"_blank",rel:"noopener noreferrer"},C=n("\u5168\u9762\u6559\u7A0B"),L=s("h3",{id:"_1-\u547D\u4EE4",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-\u547D\u4EE4","aria-hidden":"true"},"#"),n(" 1. \u547D\u4EE4")],-1),S=e(`<li><p>\u67E5\u770Bdocker\u7248\u672C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> --version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>image \u67E5\u770B\u672C\u5730\u6709\u54EA\u4E9B\u955C\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> image <span class="token function">ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>search \u641C\u7D22docker\u955C\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> search ubuntu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>pull \u4E0B\u8F7D\u9700\u8981\u7684docker\u955C\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull ubuntu:rolling
<span class="token comment"># The centos: **latest** tag is always the most recent version currently available.</span>
<span class="token function">docker</span> pull centos:latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>rmi \u5220\u9664\u6620\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> rmi image_name  <span class="token comment"># \u5220\u9664\u6620\u50CF</span>
<span class="token function">docker</span> rmi image_name -f <span class="token comment"># \u5F3A\u5236\u5220\u9664\u6620\u50CF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>ps/container \u67E5\u770B\u672C\u5730\u6709\u54EA\u4E9B\u5BB9\u5668</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> container <span class="token function">ls</span>  <span class="token comment"># \u53EA\u5217\u51FA\u6B63\u5728\u8FD0\u884C\u7684</span>
<span class="token function">docker</span> container <span class="token function">ls</span> --all  <span class="token comment"># \u5217\u51FA\u6240\u6709, \u5305\u62EC\u8FD0\u884C\u7ED3\u675F\u7684</span>
<span class="token function">docker</span> <span class="token function">ps</span>  <span class="token comment"># \u67E5\u770B\u6B63\u5728\u8FD0\u884C\u7684\u5BB9\u5668</span>
<span class="token function">docker</span> <span class="token function">ps</span> --all  <span class="token comment"># \u67E5\u770B\u6240\u6709\u7684\u5BB9\u5668</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>create \u521B\u5EFA\u5BB9\u5668</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> create <span class="token operator">&lt;</span>\u9009\u9879<span class="token operator">&gt;</span><span class="token operator">&lt;</span>\u955C\u50CF\u540D\u79F0,id<span class="token operator">&gt;</span><span class="token operator">&lt;</span>\u547D\u4EE4<span class="token operator">&gt;</span><span class="token operator">&lt;</span>\u53C2\u6570<span class="token operator">&gt;</span>
-i  <span class="token comment"># \u4EA4\u4E92\u5F0F\u64CD\u4F5C</span>
-t  <span class="token comment"># \u7EC8\u7AEF</span>
--rm    <span class="token comment"># --rm \u7B49\u4EF7\u4E8E --rm=True, \u9ED8\u8BA4False,\u82E5\u5BB9\u5668\u5185\u7684\u8FDB\u7A0B\u7EC8\u6B62\uFF0C\u5219\u81EA\u52A8\u5220\u9664\u5BB9\u5668\uFF0C\u6B64\u9009\u9879\u4E0D\u80FD\u4E0E-d\u9009\u9879\u4E00\u8D77\u4F7F\u7528, \u4E00\u65E6\u9000\u51FA\u5219\u5220\u9664, \u4E00\u822C\u7528\u4E8E\u6D4B\u8BD5</span>
--attach<span class="token operator">=</span><span class="token string">&quot;stdin&quot;</span>  <span class="token comment"># \u5C06\u6807\u51C6\u8F93\u5165\u3001\u6807\u51C6\u8F93\u51FA\u3001\u6807\u51C6\u9519\u8BEF\u94FE\u63A5\u5230\u5BB9\u5668</span>
--add-host<span class="token operator">=</span>hello:192.168.0.233  <span class="token comment"># \u5411\u5BB9\u5668\u7684/etc/hosts\u6DFB\u52A0\u4E3B\u673A\u540D\u4E0EIP\u5730\u5740</span>
--add-host<span class="token operator">=</span>host.docker.internal:host-gateway <span class="token comment"># \u5B9E\u73B0\u5BB9\u5668\u8BBF\u95EE\u4E3B\u673A\u7AEF\u53E3, linux\u9700\u8981\u9002\u7528, mac\u76F4\u63A5\u8BBF\u95EEdocker.for.mac.host.internal</span>
--link mysql-server:mysql   <span class="token comment"># \u8FDB\u884C\u5BB9\u5668\u8FDE\u63A5\uFF0C\u683C\u5F0F\u4E3A&lt;\u5BB9\u5668\u540D\u79F0&gt;:&lt;\u522B\u540D&gt;</span>
--name <span class="token comment"># \u8BBE\u7F6E\u5BB9\u5668\u540D\u79F0</span>
--net<span class="token operator">=</span><span class="token string">&quot;bridge&quot;</span> <span class="token comment"># \u8BBE\u7F6E\u5BB9\u5668\u7684\u7F51\u7EDC\u6A21\u5F0F\uFF08\u9009\u9879\u53EF\u4EE5\u662F\uFF1Abridge,none,container,host\uFF09</span>
-P\u3001--publish-all<span class="token operator">=</span>false <span class="token comment"># \u5C06\u8FDE\u63A5\u5230\u4E3B\u673A\u7684\u5BB9\u5668\u7684\u6240\u6709\u7AEF\u53E3\u66B4\u9732\u5728\u5916</span>
-p\u3001--publish<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment"># \u5982:-p 3128:3128 \u5C06\u8FDE\u63A5\u5230\u4E3B\u673A\u7684\u5BB9\u5668\u7684\u7279\u5B9A\u7AEF\u53E3\u66B4\u9732\u5728\u5916\u3002\u4E00\u822C\u4E3B\u8981\u7528\u4E8E\u66B4\u9732web\u670D\u52A1\u5668\u7684\u7AEF\u53E3</span>
-v\u3001--volume<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment"># \u8BBE\u7F6E\u6570\u636E\u5377\u3002\u8BBE\u7F6E\u8981\u4E0E\u4E3B\u673A\u5171\u4EAB\u76EE\u5F55\uFF0C\u4E0D\u5C06\u6587\u4EF6\u4FDD\u5B58\u5230\u5BB9\u5668\uFF0C\u800C\u76F4\u63A5\u4FDD\u5B58\u5230\u4E3B\u673A\u3002\u5728\u4E3B\u673A\u76EE\u5F55\u540E\u6DFB\u52A0 :ro\u3001:rw\u8FDB\u884C\u8BFB\u5199\u8BBE\u7F6E\uFF0C\u9ED8\u8BA4\u4E3A:rw</span>
-w\u3001--workdir<span class="token operator">=</span><span class="token string">&quot;&quot;</span>    <span class="token comment"># \u8BBE\u7F6E\u5BB9\u5668\u5185\u90E8\u8981\u8FD0\u884C\u8FDB\u7A0B\u7684\u76EE\u5F55</span>
--privileged    <span class="token comment"># \u7279\u6743\u6A21\u5F0F</span>
-d\u3001--detach    <span class="token comment"># Detach\u6A21\u5F0F\uFF0C\u4E00\u822C\u4E3A\u5B88\u62A4\u8FDB\u7A0B\u6A21\u5F0F\uFF0C\u5BB9\u5668\u4EE5\u540E\u53F0\u65B9\u5F0F\u8FD0\u884C</span>
--sig-proxy<span class="token operator">=</span>true    <span class="token comment"># \u5C06\u6240\u6709\u4FE1\u53F7\u4F20\u9012\u7ED9\u8FDB\u7A0B\uFF08\u975ETTY\u6A21\u5F0F\u65F6\u4E5F\u4E00\u6837\uFF09\uFF0C\u4F46\u4E0D\u4F20\u9012SIGCHLD\u3001SIGKILL\u3001SIGSTOP\u4FE1\u53F7</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>run \u542F\u52A8\u5BB9\u5668</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u53C2\u6570\u540Ccreate</span>
<span class="token function">docker</span> run <span class="token operator">&lt;</span>\u9009\u9879<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>\u955C\u50CF\u540D\u79F0\uFF0Cid<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>\u547D\u4EE4<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>\u53C2\u6570<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>start/attach/restart \u542F\u52A8\u5E76\u767B\u9646\u6307\u5B9A\u5BB9\u5668</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> start 858fd7c6a9d5<span class="token punctuation">(</span>container_id<span class="token punctuation">)</span>  <span class="token comment"># \u542F\u52A8\u4E00\u4E2A\u5BB9\u5668</span>
<span class="token function">docker</span> attach container_name/container_id  <span class="token comment"># \u91CD\u65B0\u767B\u9646\u6307\u5B9A\u5BB9\u5668</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>pause/unpause \u6682\u505C/\u542F\u52A8\u5BB9\u5668</p></li><li><p>exit \u9000\u51FA\u5BB9\u5668</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">exit</span>  <span class="token comment"># \u5373\u53EF\u9000\u51FA\u5E76\u5173\u95ED</span>
\u6216\u4F7F\u7528 ctrl + D
<span class="token comment"># \u9000\u51FA\u5E76\u540E\u53F0\u8FD0\u884C:</span>
ctrl + P + Q
\u6216: Ctrl + P , Ctrl + D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>logs \u67E5\u770B\u5BB9\u5668\u65E5\u5FD7</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> logs 858fd7c6a9d5<span class="token punctuation">(</span>container_id<span class="token punctuation">)</span>  <span class="token comment"># \u67E5\u770B\u5BB9\u5668\u7684log</span>
-f <span class="token comment"># \u6301\u7EED\u8F93\u51FA</span>
--tail<span class="token operator">=</span><span class="token number">7</span>    <span class="token comment"># \u6307\u5B9A\u6570\u91CF</span>
-t  <span class="token comment"># \u663E\u793A\u65F6\u95F4\u6233 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>port \u67E5\u770B\u5BB9\u5668\u5F00\u653E\u7684\u7AEF\u53E3</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> port 858fd7c6a9d5<span class="token punctuation">(</span>container_id<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>cp \u5BB9\u5668\u548C\u5916\u754C\u6587\u4EF6\u4F20\u8F93</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">docker</span> <span class="token function">cp</span> contain_id:/root/DTP/output.xlsx ~/new_dir/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>top \u67E5\u770B\u5BB9\u5668\u8FDB\u7A0B\u4FE1\u606F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">top</span> 858fd7c6a9d5<span class="token punctuation">(</span>container_id<span class="token punctuation">)</span> aux  <span class="token comment"># \u67E5\u770B\u5BB9\u5668\u7684\u8FDB\u7A0B</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>exec \u4ECE\u5916\u90E8\u8FD0\u884C\u5185\u90E8\u7684\u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it 858fd7c6a9d5<span class="token punctuation">(</span>container_id<span class="token punctuation">)</span> /bin/bash  <span class="token comment"># \u8FDE\u63A5\u5BB9\u5668</span>
<span class="token function">ps</span> ax
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>export \u5BB9\u5668\u6301\u4E45\u5316</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4E0D\u4FDD\u5B58\u5386\u53F2\u7684\u5BFC\u5165\u5BFC\u51FA</span>
<span class="token function">docker</span> <span class="token builtin class-name">export</span> contain_id <span class="token operator">&gt;</span> ./new_contain.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>save</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u4FDD\u5B58\u5386\u53F2\u7684\u5BFC\u5165\u5BFC\u51FA</span>
<span class="token function">docker</span> save contain_id <span class="token operator">&gt;</span> ./new_contain.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>import \u5BB9\u5668\u7684\u5BFC\u5165</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">import</span> dtp_container.tar dtp  <span class="token comment"># \u5BB9\u5668\u7684\u540D\u79F0\u5C06\u662Fdtp</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>commit \u5BB9\u5668\u5236\u4F5C\u955C\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6839\u636E\u5BB9\u5668\u7684\u6539\u53D8\u751F\u6210\u4E00\u4E2A\u65B0\u7684\u955C\u50CF</span>
<span class="token function">docker</span> commit contain_id ./new_image.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>rm \u5220\u9664\u5BB9\u5668\u64CD\u4F5C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">rm</span> container_id/container_name  <span class="token comment"># \u5220\u9664\u5BB9\u5668</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>rmi \u5220\u9664\u955C\u50CF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> rmi image_name  <span class="token comment"># \u5220\u9664\u955C\u50CF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>info \u663E\u793A\u5F53\u524D\u7CFB\u7EDF\u4FE1\u606F\u3001docker\u5BB9\u5668\u3001\u955C\u50CF\u4E2A\u6570\u3001\u8BBE\u7F6E\u7B49\u4FE1\u606F\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> info
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li>`,23),H=n("\u4F7F\u7528\u7279\u6743\u8FD0\u884Cdocker"),O={href:"https://blog.51cto.com/lizhenliang/1975466",target:"_blank",rel:"noopener noreferrer"},T=n("https://blog.51cto.com/lizhenliang/1975466"),V=e(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d -name centos7 --privileged<span class="token operator">=</span>true centos:7 /usr/sbin/init    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,1),E=e(`<h3 id="_2-\u542F\u52A8\u5BB9\u5668\u6CE8\u610F" tabindex="-1"><a class="header-anchor" href="#_2-\u542F\u52A8\u5BB9\u5668\u6CE8\u610F" aria-hidden="true">#</a> 2. \u542F\u52A8\u5BB9\u5668\u6CE8\u610F</h3><ol><li>\u914D\u7F6E\u53C2\u6570\u53EF\u4EE5\u770B\u5B98\u65B9\u8BF4\u660E, \u4E00\u822C\u6620\u5C04\u5DE6\u4FA7\u4E3A\u5BBF\u4E3B\u673A, \u53F3\u4FA7\u4E3Adocker\u5185: <ol><li>--volume /path/to/config:/config, \u6570\u636E\u5377\u6302\u8F7D, \u7EDF\u4E00\u6302\u8F7D\u5230/docker_data/contain_name/</li><li>--port 3306:3306, \u7AEF\u53E3\u8F6C\u53D1</li><li>--restart=unless-stopped \u91CD\u542F\u9009\u9879, \u4E00\u76F4\u91CD\u542F\u6216\u4E00\u76F4\u91CD\u542F\u9664\u975E\u505C\u6B62</li><li>\u5176\u4ED6</li></ol></li><li>\u542F\u52A8\u53C2\u8003 <ol><li>docker run -p 3306:3306 --restart=always --name mymysql -v /srv/dev-disk-by-label-other/docker_data/mysql/conf:/etc/mysql/conf.d -v /srv/dev-disk-by-label-other/docker_data/mysql/logs:/var/log/mysql -v /srv/dev-disk-by-label-other/docker_data/mysql/db:/var/lib/mysql -v /srv/dev-disk-by-label-other/docker_data/mysql/mysql_files:/var/lib/mysql-files -e MYSQL_ROOT_PASSWORD=maxiaoteng -d mysql:latest <ol><li>\u7AEF\u53E3\u6620\u5C04</li><li>\u81EA\u52A8\u91CD\u542F unless-stopped/always</li><li>\u540D\u79F0</li><li>\u6302\u8F7D db, conf, log, mysql-files(\u7528\u4E8Emysql dump)</li><li>root\u5BC6\u7801</li></ol></li><li>docker run -d -p 5901:5901 -v /mnt/md0/public/baiduyun:/mnt/drive_d -e vnc_password=92Hi4aJ6Fp6aLDj5 johnshine/baidunetdisk-crossover-vnc:latest</li></ol></li></ol><h2 id="_4-\u7528\u6237\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#_4-\u7528\u6237\u7BA1\u7406" aria-hidden="true">#</a> 4. \u7528\u6237\u7BA1\u7406</h2><p>Docker\u5B88\u5019\u8FDB\u7A0B\u7ED1\u5B9A\u7684\u662F\u4E00\u4E2Aunix \xA0socket\uFF0C\u800C\u4E0D\u662FTCP\u7AEF\u53E3\u3002\u8FD9\u4E2A\u5957\u63A5\u5B57\u9ED8\u8BA4\u7684\u5C5E\u4E3B\u662Froot\uFF0C\u5176\u4ED6\u662F\u7528\u6237\u53EF\u4EE5\u4F7F\u7528sudo\u547D\u4EE4\u6765\u8BBF\u95EE\u8FD9\u4E2A\u5957\u63A5\u5B57\u6587\u4EF6\u3002\u56E0\u4E3A\u8FD9\u4E2A\u539F\u56E0\uFF0Cdocker\u670D\u52A1\u8FDB\u7A0B\u90FD\u662F\u4EE5root\u5E10\u53F7\u7684\u8EAB\u4EFD\u8FD0\u884C\u7684\u3002</p><p>\u4E3A\u4E86\u907F\u514D\u6BCF\u6B21\u8FD0\u884Cdocker\u547D\u4EE4\u7684\u65F6\u5019\u90FD\u9700\u8981\u8F93\u5165sudo\uFF0C\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2Adocker\u7528\u6237\u7EC4\uFF0C\u5E76\u628A\u76F8\u5E94\u7684\u7528\u6237\u6DFB\u52A0\u5230\u8FD9\u4E2A\u5206\u7EC4\u91CC\u9762\u3002\u5F53docker\u8FDB\u7A0B\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u4F1A\u8BBE\u7F6E\u8BE5\u5957\u63A5\u5B57\u53EF\u4EE5\u88ABdocker\u8FD9\u4E2A\u5206\u7EC4\u7684\u7528\u6237\u8BFB\u5199\u3002\u8FD9\u6837\u53EA\u8981\u662F\u5728docker\u8FD9\u4E2A\u7EC4\u91CC\u9762\u7684\u7528\u6237\u5C31\u53EF\u4EE5\u76F4\u63A5\u6267\u884Cdocker\u547D\u4EE4\u4E86\u3002</p><ul><li>\u67E5\u770Bdocker\u76F8\u5173\u7684\u5206\u7EC4</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">cat</span> /etc/group <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u521B\u5EFA\u5206\u7EC4, \u6DFB\u52A0\u7528\u6237</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">groupadd</span> -g <span class="token number">999</span> <span class="token function">docker</span>   <span class="token comment"># 999\u662F\u5206\u7EC4id, \u53EF\u4E0D\u6307\u5B9A</span>
<span class="token comment"># \u6DFB\u52A0\u7528\u6237</span>
<span class="token function">sudo</span> <span class="token function">usermod</span> -aG dockerroot ec2-user
<span class="token function">sudo</span> <span class="token function">usermod</span> -aG <span class="token function">docker</span> ec2-user
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u786E\u8BA4\u521B\u5EFA\u6210\u529F</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cat</span> /etc/group
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u91CD\u542F</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u786E\u8BA4\u80FD\u5426\u76F4\u63A5\u8FD0\u884C</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> info
<span class="token comment"># \u5982\u679C\u63D0\u793A\u6743\u9650\u4E0D\u8DB3</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> a+rw /var/run/docker.sock
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="other" tabindex="-1"><a class="header-anchor" href="#other" aria-hidden="true">#</a> Other</h2><ol><li>mac\u4E0A\u5BB9\u5668\u8BBF\u95EE\u5BBF\u4E3B\u673A<code>docker.for.mac.host.internal:5000</code></li></ol>`,17);function I(G,R){const a=o("ExternalLinkIcon");return c(),t("div",null,[d,s("ol",null,[p,s("li",null,[s("p",null,[u,s("a",m,[v,l(a)]),k]),b])]),h,s("p",null,[g,s("a",f,[_,l(a)])]),x,s("p",null,[y,s("a",w,[q,l(a)]),D,s("a",P,[C,l(a)])]),L,s("ol",null,[S,s("li",null,[s("p",null,[H,s("a",O,[T,l(a)])]),V])]),E])}var M=i(r,[["render",I],["__file","docker.html.vue"]]);export{M as default};
