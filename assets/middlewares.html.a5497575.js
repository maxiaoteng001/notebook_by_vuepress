import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";import{r as n,o as t,c as i,a as e,b as r,d as a,e as d}from"./app.29a9c448.js";const o={},c=e("h1",{id:"\u4E2D\u95F4\u4EF6-middleware",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u4E2D\u95F4\u4EF6-middleware","aria-hidden":"true"},"#"),a(" \u4E2D\u95F4\u4EF6 MiddleWare")],-1),p=e("h2",{id:"_1-httperrormiddleware-\u5904\u7406200-300\u4E4B\u5916\u7684\u8FD4\u56DE\u7801",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-httperrormiddleware-\u5904\u7406200-300\u4E4B\u5916\u7684\u8FD4\u56DE\u7801","aria-hidden":"true"},"#"),a(" 1. HttpErrorMiddleware \u5904\u7406200-300\u4E4B\u5916\u7684\u8FD4\u56DE\u7801")],-1),u={href:"https://juejin.im/post/5c10a1caf265da61380f1315",target:"_blank",rel:"noopener noreferrer"},m=a("https://juejin.im/post/5c10a1caf265da61380f1315"),_=a(" \u6E90\u7801\u5C55\u793A"),h=d(`<ol><li>\u9ED8\u8BA4\u60C5\u51B5 <ol><li>200-300 \u8C03\u7528callback\uFF0C\u9664\u6B64\u4E4B\u5916ignore</li></ol></li><li>\u6307\u5B9A\u8981\u5904\u7406 <ol><li>request.meta\u53EF\u4EE5\u6307\u5B9A<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    request.meta[&#39;handle_httpstatus_all&#39;] = Ture
    # \u6216\u8005
    request.meta[&#39;handle_httpstatus_list&#39;] = [301, 302...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>spiders\u91CC\u8BBE\u7F6E<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>    self.handle_httpstatus_list = [301, 302...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li>\u5728setting\u4E2D\u914D\u7F6E</li></ol><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>    HTPERROR_ALLOWED_CODES <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">403</span><span class="token punctuation">]</span>  <span class="token comment"># \u9ED8\u8BA4\u4E3A[]</span>
    <span class="token comment"># \u6216</span>
    HTTPERROR_ALLOW_ALL <span class="token operator">=</span> <span class="token boolean">True</span>  <span class="token comment"># \u9ED8\u8BA4\u4E3AFalse</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>\u5904\u7406\u65B9\u5F0F <ol><li>callback\u4E2D\u80FD\u591F\u5904\u7406 <ul><li>200-300</li><li>\u4E0A\u8FF0\u586B\u5199\u7684\u5176\u4ED6<code>handle-http-error</code></li><li>\u5982\u679C\u4F7F\u7528\u4E86<code>HTTPERROR_ALLOW_ALL = True</code>, \u6240\u6709\u7684\u8BF7\u6C42\u90FD\u5728callback\u4E2D\u5904\u7406\uFF0C\u540C\u65F6<code>handle-http-error</code>\u914D\u7F6E\u5C06\u88AB\u8986\u76D6\uFF0C\u56E0\u4E3A\u672C\u8EAB\u5305\u542B\u4E86\u6240\u6709\u8BF7\u6C42</li></ul></li><li>errback\u5904\u7406 <ul><li>\u4E0A\u8FF0\u4E4B\u5916\u7684\uFF0C\u56E0\u4E3A\u6709\u5F02\u5E38\u629B\u51FA</li></ul></li><li>\u597D\u4E60\u60EF <ol><li>\u9664\u975E\u660E\u786E\u77E5\u9053\u8981\u5904\u7406\u7684\u8BF7\u6C42\uFF0C\u5426\u5219\u6211\u4F1A\u5C06\u6240\u6709\u90FD\u5728callback\u4E2D\u5904\u7406\uFF0C\u6253log\u6216\u8005\u52A0\u5165redis\u91CD\u8BD5\uFF0C\u56E0\u4E3A\u53EF\u4EE5\u8BB0\u5F55\u9519\u8BEF\u7801</li></ol></li></ol></li></ol>`,1);function v(b,k){const l=n("ExternalLinkIcon");return t(),i("div",null,[c,p,e("p",null,[e("a",u,[m,r(l)]),_]),h])}var g=s(o,[["render",v],["__file","middlewares.html.vue"]]);export{g as default};
