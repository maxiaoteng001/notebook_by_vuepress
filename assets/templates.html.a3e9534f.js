import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{r as p,o,c as l,a as n,b as i,w as c,d as s,e as a}from"./app.29a9c448.js";const u={},r=n("h1",{id:"templates-\u6A21\u677F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#templates-\u6A21\u677F","aria-hidden":"true"},"#"),s(" Templates \u6A21\u677F")],-1),d=n("h2",{id:"_1-\u4F7F\u7528django\u6A21\u677F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-\u4F7F\u7528django\u6A21\u677F","aria-hidden":"true"},"#"),s(" 1. \u4F7F\u7528django\u6A21\u677F")],-1),k=a(`<li><p>\u4F4D\u7F6E\uFF0C\u9879\u76EE\u6839\u76EE\u5F55\u4E0B<code>/templates</code></p><ol><li>\u6BCF\u4E2A\u5E94\u7528\u5B58\u653E\u5728\u5355\u72EC\u7684\u6587\u4EF6\u5939\u4E2D</li><li>\u9ED8\u8BA4\u67E5\u627E\u6BCF\u4E2Aapp\u7684<code>/polls/templates/polls/index.html</code></li></ol></li><li><p><code>/project/settings.py</code>\u4E2D\u751F\u6548</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>...
TEMPLATES = [
    {
        ...
        &#39;DIRS&#39;: [os.path.join(BASE_DIR, &#39;templates&#39;),],       # \u4FEE\u6539\u4F4D\u7F6E
        ...
    },
]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>\u4F7F\u7528render\u6E32\u67D3</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token comment"># \u89C1views</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;polls/index.html&#39;</span><span class="token punctuation">,</span> context<span class="token operator">=</span>context<span class="token punctuation">)</span>
<span class="token comment"># loader</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>template <span class="token keyword">import</span> loader
latest_question_list <span class="token operator">=</span> Question<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">&#39;-pub_date&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>
template <span class="token operator">=</span> loader<span class="token punctuation">.</span>get_template<span class="token punctuation">(</span><span class="token string">&#39;polls/index.html&#39;</span><span class="token punctuation">)</span>
context <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;latest_question_list&#39;</span><span class="token punctuation">:</span> latest_question_list<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span>template<span class="token punctuation">.</span>render<span class="token punctuation">(</span>context<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 404</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    question <span class="token operator">=</span> Question<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span>question_id<span class="token punctuation">)</span>
<span class="token keyword">except</span> Question<span class="token punctuation">.</span>DoesNotExist<span class="token punctuation">:</span>
    <span class="token keyword">raise</span> Http404<span class="token punctuation">(</span><span class="token string">&quot;Question does not exist&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;polls/detail.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&#39;question&#39;</span><span class="token punctuation">:</span> question<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># get-object-or-404</span>
question <span class="token operator">=</span> get_object_or_404<span class="token punctuation">(</span>Question<span class="token punctuation">,</span> pk<span class="token operator">=</span>question_id<span class="token punctuation">)</span>
<span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&#39;polls/detail.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&#39;question&#39;</span><span class="token punctuation">:</span> question<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,3),m=s("\u9759\u6001\u6587\u4EF6"),v=s("static_files.md"),b=a(`<li><p>django \u547D\u540D\u7A7A\u95F4</p><ol><li>templace\u4E2D\u7684url\u907F\u514D\u786C\u7F16\u7801<div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;/polls/{{ question.id }}/&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> question<span class="token punctuation">.</span>question_text <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token comment"># \u7B49\u4EF7</span>
<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;{% url &#39;detail&#39; question.id %}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> question<span class="token punctuation">.</span>question_text <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token comment"># urls\u4E2D\u7684\u5185\u5BB9, name=&#39;detail&#39; \u5173\u8054detail</span>
<span class="token triple-quoted-string string">&#39;&#39;&#39;
path(&#39;&lt;int:question_id&gt;/&#39;, views.detail, name=&#39;detail&#39;),
&#39;&#39;&#39;</span>
<span class="token comment"># \u5982\u679C\u9700\u8981\u4FEE\u6539views.detail\u8FD9\u4E2A\u89C6\u56FE\u7684url, \u4E0D\u9700\u8981\u6279\u91CF\u4FEE\u6539templates\u4E2D\u7684\u5185\u5BB9, \u53EA\u9700\u8981\u4FEE\u6539path\u5373\u53EF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>\u4E00\u4E2A\u9879\u76EE\u53EF\u80FD\u6709\u591A\u4E2Aapp, \u4E5F\u8BB8\u6BCF\u4E2Aapp\u90FD\u4F1A\u6709detail path, \u90A3\u4E48views\u5982\u4F55\u533A\u5206\u4E0D\u540C\u7684url <code>python # polls/urls.py app_name = &#39;polls&#39; # template &#39;&#39;&#39; &lt;a href=&quot;{% url &#39;polls.detail&#39; question.id %}&quot;&gt;&lt;a/&gt; &#39;&#39;&#39; </code></li></ol></li><li><p>Use generic views</p><ol><li>\u62BD\u8C61listView\u548CdetailView</li></ol><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>views <span class="token keyword">import</span> generic
<span class="token comment"># template_name \u9ED8\u8BA4 &lt;app name&gt;/&lt;model name&gt;_list.html</span>
<span class="token comment"># context_object_name \u9ED8\u8BA4 &lt;model name&gt;_list</span>
<span class="token keyword">class</span> <span class="token class-name">IndexView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    template_name <span class="token operator">=</span> <span class="token string">&#39;polls/index.html&#39;</span>
    context_object_name <span class="token operator">=</span> <span class="token string">&#39;latest_question_list&#39;</span>
    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;Return the last five published questions.&quot;&quot;&quot;</span>
        <span class="token keyword">return</span> Question<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">&#39;-pub_date&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token comment"># template_name \u9ED8\u8BA4 &lt;app name&gt;/&lt;model name&gt;_detail.html</span>
<span class="token comment"># context_object_name \u9ED8\u8BA4 &lt;model name&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">DetailView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>DetailView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    model <span class="token operator">=</span> Question
    template_name <span class="token operator">=</span> <span class="token string">&#39;polls/detail.html&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2);function _(g,h){const t=p("RouterLink");return o(),l("div",null,[r,d,n("ol",null,[k,n("li",null,[n("p",null,[m,i(t,{to:"/python/web/django/static_files.html"},{default:c(()=>[v]),_:1})])]),b])])}var w=e(u,[["render",_],["__file","templates.html.vue"]]);export{w as default};
